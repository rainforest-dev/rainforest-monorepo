---
import { getCollection } from 'astro:content';

import Layout from '../../layouts/index.astro';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Blogs">
  <main
    class="columns-5 container overflow-scroll *:px-4 *:py-3 *:min-h-20 *:break-inside-avoid *:border"
  >
    {
      posts.map(({ data: post, id }) => (
        <a
          class="inline-block"
          href={`/blog/${id}`}
          style={{
            height: `${100 + 100 * Math.random()}px`,
            'background-color': `#${Math.floor(Math.random() * 16777215).toString(16)}`,
          }}
        >
          <h2>{post.title}</h2>
          <p>{post.description}</p>
        </a>
      ))
    }
    {
      Array.from({ length: 100 }).map((item, index) => (
        <div
          style={{
            height: `${100 + 100 * Math.random()}px`,
            'background-color': `#${Math.floor(Math.random() * 16777215).toString(16)}`,
          }}
        >
          {index + posts.length + 1}
        </div>
      ))
    }
  </main>
</Layout>
