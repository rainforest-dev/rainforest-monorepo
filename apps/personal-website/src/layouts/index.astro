---
import '../app.css';
import SpeedInsights from '@vercel/speed-insights/astro';
import type { Props } from './types';

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Astro description" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>

    <SpeedInsights />
  </head>
  <body>
    <slot />
  </body>
</html>

<script>
  import {
    applyTheme,
    argbFromHex,
    themeFromSourceColor,
  } from '@material/material-color-utilities';
  import { sourceColor } from '../stores';

  if (sourceColor.value) {
    const theme = themeFromSourceColor(argbFromHex(sourceColor.value));
    const systemDark = window.matchMedia(
      '(prefers-color-scheme: dark)'
    ).matches;
    applyTheme(theme, {
      target: document.body,
      dark: systemDark,
    });
  }
</script>
